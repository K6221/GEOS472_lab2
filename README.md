# GEOS 472 Lab 2: Railway Network in Osaka Prefecture, Japan

Link to map: https://K6221.github.io/GEOS472_lab2/railway.html

![alt text](https://github.com/K6221/GEOS472_lab2/main/screenshot.png "Screenshot")

Collaborations and reliance on other resources:
I got initial inspiration from https://minitokyo3d.com/, which is a 2.5D map showing railway lines and the real-time position of trains in Tokyo. I also obtained the colour setting for the lines from existing static maps, which are often displayed at stations. Many of the functions implemented in this project are based on working examples published by Mapbox. (Persist sources and layers when switching a map's base style: https://docs.mapbox.com/mapbox-gl-js/example/style-switch/), (Change a map's style: https://docs.mapbox.com/mapbox-gl-js/example/setstyle/), (Display a popup on click: https://docs.mapbox.com/mapbox-gl-js/example/popup-on-click/), (Load data from an external GeoJSON file: https://docs.mapbox.com/mapbox-gl-js/example/external-geojson/). I also heavily relied on https://docs.mapbox.com/style-spec/reference/layers/ to learn what I can do to style layers. 


Reflective analysis:
My intended audience for the map is a tourist or a newcomer to Osaka, Japan. As Osaka has an extensive public transportation network, they are likely to use public transportation. In Osaka, various types of railway systems exist, such as a monorail, an elevated railway, a subway, and a light rail transit (LRT). Due to the extensiveness and variety of the railway network, many maps like Google Maps often don't reflect the vertical positionality of stations and lines. For example, it is common that the map represents a transit line as it exists on the ground level, although the line is fully underground. I think the vertical positionality is important information for people who visit Osaka for the first time because they might have a hard time finding stations. Hence, I made my map of the railway network that reflects its vertical positionality to foster the spatial understanding of tourists who want to use trains. I originally intended to create a 2.5D-like map that represents the vertical positionality of stations and lines. However, I decided to create a typical 2D map because I think many tourists use their phones to see the map. This is because a 2.5D map is too complex to be used on a phone. I used station (point) and line (line) data as they are the components of railway network data. I reduced the opacity for the lines whose dominant type (either "Underground", "Ground", or "Elevated" based on the frequency of stations' "type") is "Underground" to represent their undergroundness or they are being underground, which can be seen in https://minitokyo3d.com/. I think the difference between less opaque underground lines and ground or elevated lines is obvious, yet it is questionable that people think that less opaque lines represent subways. 

For interactivity, I provide a base map option for users, specifically either a Dark or a Light base map. Although this is true for only me, I found that darker colours are easier to see on a phone screen under outdoor conditions during the daytime. In contrast to my perception, some people may find lighter colours are easier to recognize under the same conditions. In addition, users will see a map not only under such conditions but also under other conditions, therefore I decided to provide an alternative option for the base map. I set the Dark base map as the default to help map readers notice there is a base map option. What I mean by this is that I think that users will look for other base map options as the Dark base map is not widely accepted in a commonly used map like Google Maps. I also created a clear button and decided to place it at the top left of the map as it is far from the users' thumb based on the assumption that people predominantly use their thumb when using a phone. Many existing maps do not highlight the clicked station's associated line. To foster the understanding of map users, I decided to highlight the clicked station's associated line and stations on the same line. For the associated line, I chose yellow for the Dark base map and black for the Light base map because these colours contrast each base map well. I also changed the width of the line to address the overlapping problems that I describe below. Specifically, I made them thicker so that the associated line is visible even though it is hidden by other lines in a normal situation. In addition to that, I decided to use colours that are not used to visualize any lines in the map, otherwise, they might not be able to highlight the associated line. To address the same issue of station points, I set the red colour for the clicked station and stations on the same line. I assigned the larger value for the circle radius to make it bigger so that the hidden station points are visible, and it might make the users think that they can exchange to different lines here. To make and implement this interactivity, I followed the seven stages of interaction suggested by Norman (1988 as cited in Roth, 2017). 1) My map's goal is a map that the user can understand the vertical positionality of railway lines and provide important information, such as where they can exchange to different lines and where they can go with the highlighted line. 2) Users intend to identify specific stations (e.g. nearby), understand their vertical position in relation to other stations or lines, and recognize the routes of various railway lines to plan their journeys effectively. 3) Users interact with the map interface by clicking on stations to know their associated lines, adjusting the base map for better visibility, and utilizing the clear button to reset selections. 4) Users execute their specified actions using input computing devices, particularly cell phones. 5) After executing their actions, users perceive the changes in the map representation, such as highlighted stations and associated lines and changed base map style. 6) Users interpret the changed map representation to gain insights into the vertical positionality of railway lines, station locations, and transfer opportunities. 7) Users evaluate the effectiveness of the map interface by assessing gained insights, such as the clarity of information presentation and overall usefulness for trip planning. 

Improvable points:
One possible improvable point of my map is overlapped stations and lines. Many stations, particularly the ones in the city centre, tend to overlap each other. It makes it impossible for users to click the station beneath the overlaying station. I tried to solve this issue by using the for loop function to identify overlapping stations and give an option for users to choose which lines they want to highlight. However, as I encountered a different error, which was caused by switching the base map, I did not have enough time to solve other errors caused by this function. I also tried to solve line overlapping by adjusting line-offset under map.addLayer because some people suggest it on Stackoverflow. However, it offsets all lines based on the given value, thus it did not solve the overlapping problem because lines still overlap each other after offsetting. In addition to that, the offset moves lines away from the station points, which might cause misunderstandings among the users as some stations are not connected to their associated lines. Then, I considered other options like applying multi-colour line, yet I had no idea how to do that. Solving these problems would enhance the interactivity and understanding of the map users. 
